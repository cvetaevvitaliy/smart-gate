<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1120px" preserveAspectRatio="none" style="width:852px;height:1120px;" version="1.1" viewBox="0 0 852 1120" width="852px" zoomAndPan="magnify"><defs><filter height="300%" id="fczphsu7g6z23" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" height="1105.0063" style="stroke: #A80036; stroke-width: 1.0;" width="317" x="100" y="4"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="222.5" y="16.4065">Application</text><rect fill="#DDDDDD" height="1105.0063" style="stroke: #A80036; stroke-width: 1.0;" width="149" x="675" y="4"/><rect fill="#FFFFFF" filter="url(#fczphsu7g6z23)" height="529.229" style="stroke: #000000; stroke-width: 2.0;" width="746" x="94" y="508.5801"/><rect fill="#FFFFFF" height="355.8364" style="stroke: none; stroke-width: 1.0;" width="746" x="94" y="681.9727"/><rect fill="#FFFFFF" filter="url(#fczphsu7g6z23)" height="113.7949" style="stroke: #000000; stroke-width: 2.0;" width="578" x="252" y="760.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="178.6924" y2="323.436"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="323.436" y2="364.085"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="364.085" y2="393.0337"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="393.0337" y2="433.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="433.6826" y2="525.5288"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="525.5288" y2="566.1777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="566.1777" y2="683.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="683.9727" y2="724.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="724.6216" y2="881.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="133" x2="133" y1="881.3652" y2="922.0142"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133" x2="133" y1="922.0142" y2="1054.8091"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="178.6924" y2="323.436"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="323.436" y2="364.085"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="364.085" y2="393.0337"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="393.0337" y2="433.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="433.6826" y2="525.5288"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="525.5288" y2="566.1777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="566.1777" y2="683.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="683.9727" y2="724.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="724.6216" y2="881.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="343" x2="343" y1="881.3652" y2="922.0142"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343" x2="343" y1="922.0142" y2="1054.8091"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="178.6924" y2="323.436"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="323.436" y2="364.085"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="364.085" y2="393.0337"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="393.0337" y2="433.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="433.6826" y2="525.5288"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="525.5288" y2="566.1777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="566.1777" y2="683.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="683.9727" y2="724.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="724.6216" y2="881.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="467" x2="467" y1="881.3652" y2="922.0142"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467" x2="467" y1="922.0142" y2="1054.8091"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="178.6924" y2="323.436"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="323.436" y2="364.085"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="364.085" y2="393.0337"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="393.0337" y2="433.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="433.6826" y2="525.5288"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="525.5288" y2="566.1777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="566.1777" y2="683.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="683.9727" y2="724.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="724.6216" y2="881.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="595" x2="595" y1="881.3652" y2="922.0142"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="595" y1="922.0142" y2="1054.8091"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="74.146" y2="138.0435"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="138.0435" y2="178.6924"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="178.6924" y2="323.436"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="323.436" y2="364.085"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="364.085" y2="393.0337"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="393.0337" y2="433.6826"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="433.6826" y2="525.5288"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="525.5288" y2="566.1777"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="566.1777" y2="683.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="683.9727" y2="724.6216"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="724.6216" y2="881.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="749" x2="749" y1="881.3652" y2="922.0142"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="749" x2="749" y1="922.0142" y2="1054.8091"/><rect fill="#FEFECE" filter="url(#fczphsu7g6z23)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="104" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="111" y="59.4082">main.c</text><rect fill="#FEFECE" filter="url(#fczphsu7g6z23)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="104" y="1053.8091"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="111" y="1074.1699">main.c</text><rect fill="#FEFECE" filter="url(#fczphsu7g6z23)" height="46.1973" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="274" y="22.9487"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="281" y="43.3096">Application support</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="315" y="59.4082">modules</text><rect fill="#FEFECE" filter="url(#fczphsu7g6z23)" height="46.1973" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="274" y="1053.8091"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="281" y="1074.1699">Application support</text><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="315" y="1090.2686">modules</text><rect fill="#FEFECE" filter="url(#fczphsu7g6z23)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="423" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="430" y="59.4082">Mesh stack</text><rect fill="#FEFECE" filter="url(#fczphsu7g6z23)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="423" y="1053.8091"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="430" y="1074.1699">Mesh stack</text><rect fill="#FEFECE" filter="url(#fczphsu7g6z23)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="522" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="529" y="59.4082">Generic OnOff client</text><rect fill="#FEFECE" filter="url(#fczphsu7g6z23)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="143" x="522" y="1053.8091"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="529" y="1074.1699">Generic OnOff client</text><rect fill="#FEFECE" filter="url(#fczphsu7g6z23)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="679" y="39.0474"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="686" y="59.4082">Mesh core modules</text><rect fill="#FEFECE" filter="url(#fczphsu7g6z23)" height="30.0986" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="679" y="1053.8091"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="686" y="1074.1699">Mesh core modules</text><polygon fill="#FBFB77" filter="url(#fczphsu7g6z23)" points="8,89.146,8,128.146,255,128.146,255,99.146,245,89.146,8,89.146" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="245" x2="245" y1="89.146" y2="99.146"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="255" x2="245" y1="99.146" y2="99.146"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="14" y="106.5525">init_params defines UUID, core params</text><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="18" y="121.5012">and event callbacks</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="423" y="162.5413">Initialize</text><polygon fill="#A80036" points="331.5,194.6924,341.5,198.6924,331.5,202.6924,335.5,198.6924" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="198.6924" y2="198.6924"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="140.5" y="195.0989">ble_stack_init()</text><polygon fill="#A80036" points="331.5,223.6411,341.5,227.6411,331.5,231.6411,335.5,227.6411" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="227.6411" y2="227.6411"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="140.5" y="224.0476">gap_params_init()</text><polygon fill="#A80036" points="331.5,252.5898,341.5,256.5898,331.5,260.5898,335.5,256.5898" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="256.5898" y2="256.5898"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="140.5" y="252.9963">conn_params_init()</text><polygon fill="#A80036" points="455.5,281.5386,465.5,285.5386,455.5,289.5386,459.5,285.5386" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="461.5" y1="285.5386" y2="285.5386"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="140.5" y="281.9451">mesh_stack_init(...)</text><polygon fill="#A80036" points="737.5,310.4873,747.5,314.4873,737.5,318.4873,741.5,314.4873" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="467.5" x2="743.5" y1="314.4873" y2="314.4873"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="474.5" y="310.8938">Initialize: Mesh and Foundation models</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="443" y="347.9338"/><polygon fill="#A80036" points="583.5,380.085,593.5,384.085,583.5,388.085,587.5,384.085" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="589.5" y1="384.085" y2="384.085"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="140.5" y="380.4915">generic_onoff_client_init(...) x 2</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="23" x="430" y="417.5315">Start</text><polygon fill="#A80036" points="455.5,449.6826,465.5,453.6826,455.5,457.6826,459.5,453.6826" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="461.5" y1="453.6826" y2="453.6826"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="140.5" y="450.0891">mesh_stack_start()</text><polygon fill="#FBFB77" filter="url(#fczphsu7g6z23)" points="389,467.6313,389,491.6313,542,491.6313,542,477.6313,532,467.6313,389,467.6313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="532" x2="532" y1="467.6313" y2="477.6313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="542" x2="532" y1="477.6313" y2="477.6313"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="395" y="485.0378">Start dynamic behavior</text><rect fill="none" height="529.229" style="stroke: #000000; stroke-width: 2.0;" width="746" x="94" y="508.5801"/><polygon fill="#EEEEEE" points="94,508.5801,155,508.5801,155,514.5801,145,524.5801,94,524.5801,94,508.5801" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="109" y="521.9866">alt</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="400" y="550.0266">Provisioned node</text><polygon fill="#A80036" points="144.5,582.1777,134.5,586.1777,144.5,590.1777,140.5,586.1777" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138.5" x2="594.5" y1="586.1777" y2="586.1777"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="150.5" y="582.5842">onoff_status_cb(...)</text><polygon fill="#A80036" points="144.5,611.1265,134.5,615.1265,144.5,619.1265,140.5,615.1265" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138.5" x2="594.5" y1="615.1265" y2="615.1265"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="150.5" y="611.533">ack_transaction_status_cb(...)</text><polygon fill="#A80036" points="144.5,640.0752,134.5,644.0752,144.5,648.0752,140.5,644.0752" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138.5" x2="594.5" y1="644.0752" y2="644.0752"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="150.5" y="640.4817">periodic_publish_cb(...)</text><polygon fill="#A80036" points="583.5,669.0239,593.5,673.0239,583.5,677.0239,587.5,673.0239" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="589.5" y1="673.0239" y2="673.0239"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="140.5" y="669.4304">generic_onoff_client_set/set_unack(...)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="94" x2="840" y1="682.9727" y2="682.9727"/><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="389.5" y="708.4705">Unprovisioned device</text><polygon fill="#A80036" points="331.5,740.6216,341.5,744.6216,331.5,748.6216,335.5,744.6216" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="744.6216" y2="744.6216"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="140.5" y="741.0281">mesh_provisionee_prov_start(...)</text><rect fill="none" height="113.7949" style="stroke: #000000; stroke-width: 2.0;" width="578" x="252" y="760.5703"/><polygon fill="#EEEEEE" points="252,760.5703,430,760.5703,430,766.5703,420,776.5703,252,776.5703,252,760.5703" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="267" y="773.9768">Initialize provisionee</text><polygon fill="#FBFB77" filter="url(#fczphsu7g6z23)" points="262,782.519,262,806.519,421,806.519,421,792.519,411,782.519,262,782.519" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="411" x2="411" y1="782.519" y2="792.519"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="421" x2="411" y1="792.519" y2="792.519"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="268" y="799.9255">Define OOB capabilities</text><polygon fill="#A80036" points="737.5,832.4678,747.5,836.4678,737.5,840.4678,741.5,836.4678" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="743.5" y1="836.4678" y2="836.4678"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="350.5" y="832.8743">Start unprovisioned device beacon</text><polygon fill="#A80036" points="737.5,861.4165,747.5,865.4165,737.5,869.4165,741.5,865.4165" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="743.5" y1="865.4165" y2="865.4165"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="350.5" y="861.823">Listen for provisioning invite</text><text fill="#000000" font-family="Arial" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="363" y="905.863">Wait for provisioning to complete</text><polygon fill="#A80036" points="354.5,938.0142,344.5,942.0142,354.5,946.0142,350.5,942.0142" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="348.5" x2="748.5" y1="942.0142" y2="942.0142"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="360.5" y="938.4207">Provisioning Events</text><polygon fill="#A80036" points="144.5,966.9629,134.5,970.9629,144.5,974.9629,140.5,970.9629" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="138.5" x2="342.5" y1="970.9629" y2="970.9629"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="150.5" y="967.3694">provisioning_complete_cb()</text><polygon fill="#A80036" points="331.5,995.9116,341.5,999.9116,331.5,1003.9116,335.5,999.9116" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="999.9116" y2="999.9116"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="140.5" y="996.3181">gap_params_init()</text><polygon fill="#A80036" points="331.5,1024.8604,341.5,1028.8604,331.5,1032.8604,335.5,1028.8604" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="133.5" x2="337.5" y1="1028.8604" y2="1028.8604"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="140.5" y="1025.2668">conn_params_init()</text><!--
@startuml
skinparam defaultFontName Arial
box "Application" #FFFFFF
participant a as "main.c"
participant ah as "Application support\nmodules"
end box
participant c as "Mesh stack"
participant s as "Generic OnOff client"
box
participant core as "Mesh core modules"
end box

note over a: init_params defines UUID, core params\n and event callbacks
... Initialize ...
a -> ah: ble_stack_init()
a -> ah: gap_params_init()
a -> ah: conn_params_init()
a -> c: mesh_stack_init(...)
c -> core: Initialize: Mesh and Foundation models
... ...
a -> s: generic_onoff_client_init(...) x 2
... Start ...
a -> c: mesh_stack_start()
note over c: Start dynamic behavior


alt
    ... Provisioned node ...
    a <- s: onoff_status_cb(...)
    a <- s: ack_transaction_status_cb(...)
    a <- s: periodic_publish_cb(...)
    a -> s: generic_onoff_client_set/set_unack(...)
else
    ... Unprovisioned device ...
    a -> ah: mesh_provisionee_prov_start(...)
    group Initialize provisionee
    note over ah: Define OOB capabilities
    ah -> core: Start unprovisioned device beacon
    ah -> core: Listen for provisioning invite
    end
    ... Wait for provisioning to complete ...
    core -> ah: Provisioning Events
    ah -> a: provisioning_complete_cb()
    a -> ah: gap_params_init()
    a -> ah: conn_params_init()
end

@enduml

PlantUML version 1.2017.16(Sun Sep 03 12:53:37 CEST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_191-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>